(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),l=n.n(o),c=(n(20),n(2)),u=(n(21),function(e){var t=e.filterName,n=e.handleFilterChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"filter-input"},"filter shown with ",r.a.createElement("input",{id:"filter-input",type:"text",value:t,onChange:n})))}),i=function(e){var t=e.htmlFor,n=e.type,a=e.autoComplete,o=e.value,l=e.handleFunction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field-box"},r.a.createElement("label",{htmlFor:t},t,": "),r.a.createElement("input",{id:t,type:n,autoComplete:a,value:o,onChange:l,required:!0})))},m=function(e){var t=e.addPerson,n=e.newName,a=e.handlePersonNameChange,o=e.newNumber,l=e.handlePersonNumberChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:t},r.a.createElement(i,{htmlFor:"name",type:"text",autoComplete:"name",value:n,handleFunction:a}),r.a.createElement(i,{htmlFor:"number",type:"tel",autoComplete:"tel",value:o,handleFunction:l}),r.a.createElement("section",{style:{width:"225px"}},r.a.createElement("button",{type:"submit",style:{width:"100%",backgroundColor:"#FAE601",color:"#37549D",fontWeight:"900",fontSize:"1.5rem",padding:"0.25rem"}},"add"))))},d=n(14),s=function(e){var t=e.name,n=e.number,a=e.id,o=e.deletePerson,l=e.sendToPersonForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:"item-row",style:{paddingBottom:"1rem",height:"3rem"}},r.a.createElement("td",null,r.a.createElement(d.a,null)),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return l(t,n)},style:{marginLeft:"1rem",backgroundColor:"#BFDFC9",color:"#8F1E5D",padding:"0.25rem",fontWeight:"800"}},"update")),r.a.createElement("td",null,r.a.createElement("button",{name:t,onClick:function(e){console.log(e.target.name),o(e.target.name,a)},style:{marginLeft:"1rem",backgroundColor:"#FD6604",color:"#FEF2E9",padding:"0.25rem",fontWeight:"800"}},"delete"))))},f=function(e){var t=e.itemsToShow,n=e.deletePerson,a=e.sendToPersonForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(s,{key:e.id,name:e.name,number:e.number,id:e.id,deletePerson:n,sendToPersonForm:a})})))))},h=n(3),b=n.n(h),p=function(){return b.a.get("/api/persons").then((function(e){return e.data}))},g=function(e){return b.a.post("/api/persons",e).then((function(e){return e.data}))},E=function(e,t){return b.a.put("".concat("/api/persons","/").concat(e),t),b.a.get("/api/persons").then((function(e){return e.data}))},w=function(e){return b.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.data}))},v=function(e){var t=e.message,n=e.errorToggle;return null===t?null:r.a.createElement("div",{className:n?"error notice":"success notice"},t)},F=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)("... add a new person"),i=Object(c.a)(l,2),d=i[0],s=i[1],h=Object(a.useState)("... add a new number"),b=Object(c.a)(h,2),F=b[0],C=b[1],O=Object(a.useState)(!0),j=Object(c.a)(O,2),S=j[0],y=j[1],P=Object(a.useState)(""),N=Object(c.a)(P,2),T=N[0],k=N[1],D=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,x=Object(a.useState)(!1),L=Object(c.a)(x,2),W=L[0],I=L[1],$=Object(a.useState)(null),B=Object(c.a)($,2),A=B[0],J=B[1],U=Object(a.useState)(!1),q=Object(c.a)(U,2),z=q[0],M=q[1],G=Object(a.useState)(""),H=Object(c.a)(G,2),K=H[0],Q=H[1];Object(a.useEffect)((function(){console.log("effect"),p().then((function(e){console.log("promise fulfilled"),o(e)}))}),[W]);var R=S?n:n.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{id:"one"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(v,{message:A,errorToggle:z}),r.a.createElement(u,{filterName:T,handleFilterChange:function(e){k(e.target.value),y(!S)}})),r.a.createElement("section",{id:"two"},r.a.createElement("h2",null,"add a new number"),r.a.createElement(m,{addPerson:function(e){if(e.preventDefault(),"... add a new person"===d||"... add a new number"===F)return alert("Please fill out all fields");if(!D.test(F))return alert("Please enter a valid 10-digit phone number");if(n.some((function(e){return e.name===d}))&&n.some((function(e){return e.number===F})))return alert("".concat(d," is already added to phonebook"));if(n.some((function(e){return e.name===d}))){var t=n.filter((function(e){return e.name===d})).map((function(e){return e.id}));t=t[0];var a={date:(new Date).toISOString(),id:t,name:d,number:F};if(!window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?")))return;return E(t,a).then((function(e){o(e),s(""),C(""),I(!W)})).then((function(e){J("Updated ".concat(d)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){M(!0),J("Information of ".concat(d," has already been removed from server")),setTimeout((function(){J(null),J(!1)}),5e3)})),console.log("update fulfilled")}var r=n.reduce((function(e,t){return t.id>e?t.id:e}),n[0].id),l={date:(new Date).toISOString(),id:r+1,name:d,number:F};g(l).then((function(e){o(n.concat(e)),s(""),C("")})).then((function(e){J("Added ".concat(d)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){M(!0),J("While adding ".concat(d," the following error occurred: ").concat(e)),setTimeout((function(){J(null),M(!1)}),5e3)}))},newName:d,handlePersonNameChange:function(e){var t=e.target.value;t=t.toLowerCase().replace(/\b./g,(function(e){return e.toUpperCase()})),s(t)},newNumber:F,handlePersonNumberChange:function(e){var t=e.target.value.replace(D,"($1) $2-$3");C(t)}})),r.a.createElement("section",{id:"three"},r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{itemsToShow:R,deletePerson:function(e,t){Q(e);var n="Deleted ".concat(K);window.confirm("Delete ".concat(e,"?"))&&w(t).then((function(){return I(!W)})).then((function(){J(n),setTimeout((function(){J(null),Q("")}),5e3)})).catch((function(e){M(!0),J("While deleting ".concat(K," the following error occurred: ").concat(e)),setTimeout((function(){M(!1),J(null)}),5e3)}))},sendToPersonForm:function(e,t){s(e),C(t)}})))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.37937121.chunk.js.map