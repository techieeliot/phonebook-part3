{"version":3,"sources":["components/Filter.jsx","components/FieldBox.jsx","components/PersonForm.jsx","components/Item.jsx","components/Persons.jsx","services/items.js","components/Notification.jsx","App.jsx","index.js"],"names":["Filter","filterName","handleFilterChange","htmlFor","id","type","value","onChange","FieldBox","autoComplete","handleFunction","className","required","PersonForm","addPerson","newName","handlePersonNameChange","newNumber","handlePersonNumberChange","onSubmit","style","width","backgroundColor","color","fontWeight","fontSize","padding","Item","name","number","deletePerson","sendToPersonForm","paddingBottom","height","onClick","marginLeft","event","console","log","target","Persons","itemsToShow","map","person","key","axios","get","then","response","data","newObject","post","put","delete","Notification","message","errorToggle","App","useState","persons","setPersons","setNewName","setNewNumber","showAll","setShowAll","setFilterName","phoneNumberRegex","toggle","setToggle","errorMessage","setErrorMessage","isError","setIsError","deletedPerson","setDeletedPerson","useEffect","itemsService","initialItems","filter","toLowerCase","includes","preventDefault","alert","test","some","item","updateId","newPersonObject","date","Date","toISOString","window","confirm","updatedPersons","setTimeout","catch","error","maxId","reduce","max","personObject","returnedPersons","concat","string","replace","a","toUpperCase","formattedPhoneNumber","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.37937121.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({ filterName, handleFilterChange }) => (\n    <>\n        <label htmlFor=\"filter-input\">filter shown with <input \n            id=\"filter-input\"\n            type=\"text\"\n            value={filterName}\n            onChange={handleFilterChange} /> \n        </label>\n    </>\n)\n\nexport default Filter\n\n","import React from 'react'\n\nconst FieldBox = ({ htmlFor, type, autoComplete, value, handleFunction }) => (\n    <>\n        <div className=\"field-box\">\n            <label htmlFor={htmlFor} >{htmlFor}: </label>\n            <input\n                id={htmlFor}\n                type={type}\n                autoComplete={autoComplete}\n                value={value}\n                onChange={handleFunction} required/>\n        </div>\n    </>\n)\n\nexport default FieldBox\n\n","import React from 'react'\nimport FieldBox from './FieldBox'\n\nconst PersonForm = ({ addPerson, newName, handlePersonNameChange, newNumber, handlePersonNumberChange }) => (\n    <>\n        <form onSubmit={addPerson}>\n            <FieldBox htmlFor=\"name\"\n                type=\"text\"\n                autoComplete=\"name\"\n                value={newName}\n                handleFunction={handlePersonNameChange} />\n            <FieldBox htmlFor=\"number\"\n                type=\"tel\"\n                autoComplete=\"tel\"\n                value={newNumber}\n                handleFunction={handlePersonNumberChange} />\n            <section style={{width: \"225px\"}}>\n                <button type=\"submit\" \n                    style={\n                        {width: \"100%\", \n                        backgroundColor: \"#FAE601\", \n                        color: \"#37549D\", \n                        fontWeight: \"900\", \n                        fontSize: \"1.5rem\",\n                        padding: \"0.25rem\"}\n                    }>\n                    add\n                </button>\n            </section>\n        </form>\n    </>\n)\n\nexport default PersonForm\n\n","import React from 'react'\nimport { BiCircle } from 'react-icons/bi'\n\nconst Item = ({ name, number, id, deletePerson, sendToPersonForm}) => {    \n    return (\n    <>\n      <tr className=\"item-row\" style={{paddingBottom: \"1rem\", height: \"3rem\" }}>\n        <td><BiCircle /></td>\n        <td>{name}</td>\n        <td>{number}</td>\n          \n        <td>\n          <button\n              onClick={() => sendToPersonForm(name, number)}\n              style={\n                  {marginLeft: \"1rem\",\n                  backgroundColor: \"#BFDFC9\", \n                  color: \"#8F1E5D\", \n                  padding: \"0.25rem\", \n                  fontWeight: \"800\"}}>\n              update \n            </button>\n        </td>\n        <td>\n          <button\n              name={name}\n              onClick={ event => { console.log(event.target.name) \n                deletePerson(event.target.name, id)}}\n              style={\n                  {marginLeft: \"1rem\",\n                  backgroundColor: \"#FD6604\", \n                  color: \"#FEF2E9\", \n                  padding: \"0.25rem\", \n                  fontWeight: \"800\"}}>\n              delete\n            </button>\n        </td>\n      </tr>\n    </>\n    )\n}\n\nexport default Item\n\n","import React from 'react'\nimport Item from './Item'\n\nconst Persons = ({ itemsToShow, deletePerson, sendToPersonForm }) => {\nreturn(\n    <>\n        <table>\n            <tbody>\n                {itemsToShow.map(person => \n                    <Item \n                        key={person.id} \n                        name={person.name} \n                        number={person.number} \n                        id={person.id} \n                        deletePerson={deletePerson}\n                        sendToPersonForm={sendToPersonForm}/>\n                )}\n            </tbody>\n        </table>\n    </>\n)}\n\nexport default Persons\n\n","import axios from \"axios\";\nconst personsUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(personsUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(personsUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  axios.put(`${personsUrl}/${id}`, newObject);\n  return axios.get(personsUrl).then((response) => response.data);\n};\n\nconst deleteItem = (id) => {\n  const request = axios.delete(`${personsUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, deleteItem };\n","import React from 'react'\n\nconst Notification = ({message, errorToggle}) => {\n    if (message === null) {\n        return null\n      }\n    return (\n\n        <div className={(errorToggle) ? \"error notice\" : \"success notice\"}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport './App.css'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport itemsService from './services/items'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('... add a new person')\n  const [ newNumber, setNewNumber ] = useState('... add a new number')\n  const [showAll, setShowAll] = useState(true)\n  const [filterName, setFilterName] = useState('')\n  const phoneNumberRegex = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\n  const [ toggle , setToggle ] = useState(false)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [isError, setIsError] = useState(false)\n  const [deletedPerson, setDeletedPerson] = useState('')\n\n  useEffect(() => {\n    console.log('effect')\n    itemsService\n      .getAll()\n      .then(initialItems => {\n        console.log('promise fulfilled')\n        setPersons(initialItems)\n      })\n  }, [toggle])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (newName === '... add a new person' || newNumber ==='... add a new number') {\n      return alert('Please fill out all fields')\n    }\n\n    if (!phoneNumberRegex.test(newNumber)) {\n      return alert('Please enter a valid 10-digit phone number')\n    }\n    if (persons.some(item => item.name === newName) && persons.some(item => item.number === newNumber)) {\n      return alert(`${newName} is already added to phonebook`)\n    }\n    if (persons.some(item => item.name === newName)) {\n      let updatedPerson = persons.filter(item => item.name === newName)\n      let updateId = updatedPerson.map(item => item.id)\n      updateId = updateId[0]\n      \n      const newPersonObject = {\n        date: new Date().toISOString(),\n        id: updateId,\n        name: newName,\n        number: newNumber\n      }\n      const confirmUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`) \n      if (!confirmUpdate) {\n        return\n      }\n\n      itemsService\n        .update(updateId, newPersonObject)\n        .then(updatedPersons => {\n          setPersons(updatedPersons)\n          setNewName('')\n          setNewNumber('')\n          setToggle(!toggle)\n        })\n        .then(message => {\n          setErrorMessage(\n            `Updated ${newName}`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setIsError(true)\n          setErrorMessage(\n            `Information of ${newName} has already been removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n            setErrorMessage(false)\n          }, 5000)\n        })\n      return console.log(`update fulfilled`)\n      \n    }\n  \n\n    const maxId = persons.reduce(\n      (max, person) => (person.id > max ? person.id : max),\n      persons[0].id\n    )\n\n    const personObject = {\n      date: new Date().toISOString(),\n      id: maxId + 1,\n      name: newName,\n      number: newNumber,\n    }\n\n    itemsService\n      .create(personObject)\n      .then(returnedPersons => {\n        setPersons(persons.concat(returnedPersons))\n        setNewName('')\n        setNewNumber('')\n      })\n      .then(message => {\n        setErrorMessage(\n          `Added ${newName}`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setIsError(true)\n        setErrorMessage(\n          `While adding ${newName} the following error occurred: ${error}`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n          setIsError(false)\n        }, 5000)\n      })\n  }\n\n  const deletePerson = (name, id) => {\n    setDeletedPerson(name)\n    const message = `Deleted ${deletedPerson}`\n    const confirmDelete = window.confirm(`Delete ${name}?`) \n    if (!confirmDelete) {\n      return\n    }\n    itemsService\n      .deleteItem(id)\n      .then(() => setToggle(!toggle))  \n      .then(() => {\n        setErrorMessage(\n          message\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n          setDeletedPerson('')\n        }, 5000)\n      })\n      .catch(error => {\n        setIsError(true)\n        setErrorMessage(\n          `While deleting ${deletedPerson} the following error occurred: ${error}`\n        )\n        setTimeout(() => {\n          setIsError(false)\n          setErrorMessage(null)\n        }, 5000)\n      }) \n  }\n\n  const sendToPersonForm = (name, number) => {\n    setNewName(name) \n    setNewNumber(number) \n  }\n\n  const handlePersonNameChange = (event) => {\n    let string = event.target.value\n    const capitalizeOnlyFirstLetter = s =>  s.toLowerCase().replace( /\\b./g, a => a.toUpperCase() )\n    string = capitalizeOnlyFirstLetter(string)\n    setNewName(string)\n  }\n  const handlePersonNumberChange = (event) => {\n    const formattedPhoneNumber = event.target.value.replace(phoneNumberRegex, \"($1) $2-$3\")\n    setNewNumber(formattedPhoneNumber)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilterName(event.target.value)\n    setShowAll(!showAll)\n  }\n\n  const itemsToShow = showAll \n  ? persons \n  : persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()))\n\n  return (\n    <>\n      <header id=\"one\">\n        <h1>Phonebook</h1>\n        <Notification message={errorMessage} errorToggle={isError} />\n        <Filter filterName={filterName}\n          handleFilterChange={handleFilterChange} />\n      </header>\n      <section id=\"two\">\n        <h2>add a new number</h2>\n        <PersonForm addPerson={addPerson}\n          newName={newName}\n          handlePersonNameChange={handlePersonNameChange}\n          newNumber={newNumber}\n          handlePersonNumberChange={handlePersonNumberChange} />\n      </section>\n      <section id=\"three\">\n        <h2>Numbers</h2>\n        <Persons \n          itemsToShow={itemsToShow} \n          deletePerson={deletePerson} \n          sendToPersonForm={sendToPersonForm} />\n      </section>\n    </>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}